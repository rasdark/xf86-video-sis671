XCOMM $XFree86: xc/programs/Xserver/hw/xfree86/drivers/sis/Imakefile,v 1.32 2003/04/21 12:32:11 sven Exp $
XCOMM
XCOMM This is an Imakefile for the SIS driver.  
XCOMM

#define IHaveModules
#include <Server.tmpl>

/* DRI static build only works on Linux */
#if !defined(LinuxArchitecture) && !DoLoadableServer && BuildXF86DRI
#undef BuildXF86DRI
#define BuildXF86DRI NO
#endif

#if BuildXF86DRI
DRISRCS = sis_dri.c
DRIOBJS = sis_dri.o
DRIINCLUDES = -I$(SERVERSRC)/GL/dri -I$(LIBSRC)/GL/dri \
              -I$(XTOP)/include -I$(DRMSRCDIR)/shared
DRIDEFINES = $(GLX_DEFINES)
#endif

SRCS = 300vtbl.h 310vtbl.h init301.h init.h initdef.h initextx.h\
       oem300.h oem310.h osdef.h sis300_accel.h sis310_accel.h\
       sis.h sis_3daccel.h sis_accel.h sis_common.h sis_config.h\
       sis_cursor.h sis_dac.h sis_dri.h sis_driver.h sis_regs.h\
       sis_vb.h sis_video.h sis_videostr.h vgatypes.h vstruct.h\
       sis_driver.c sis_dac.c sis_cursor.c sis_accel.c sis_setup.c \
       sis300_accel.c sis310_accel.c sis_vga.c sis_vb.c \
       sis_opt.c sis_dga.c sis_video.c init.c init301.c sis_shadow.c \
       sis6326_video.c sis_mergedfb.c initextx.c sis_memcpy.c \
       sis_3daccel.c sis_hwmc.c \
       sis_utility.c \
	   $(DRISRCS)
OBJS = sis_driver.o sis_dac.o sis_cursor.o sis_accel.o sis_setup.o \
       sis300_accel.o sis310_accel.o sis_vga.o sis_vb.o\
       sis_opt.o sis_dga.o sis_video.o init.o init301.o sis_shadow.o \
       sis6326_video.o sis_mergedfb.o initextx.o sis_memcpy.o \
       sis_3daccel.o sis_hwmc.o \
       sis_utility.o \
	   $(DRIOBJS)

#if defined(XF86DriverSDK)
INCLUDES = -I. -I../../include
#else
INCLUDES = -I. -I$(XF86COMSRC) -I$(XF86OSSRC) -I$(SERVERSRC)/Xext \
           -I$(SERVERSRC)/mfb -I$(SERVERSRC)/mi \
           -I$(SERVERSRC)/fb -I$(XF86SRC)/xaa \
           -I$(XF86SRC)/xf1bpp -I$(XF86SRC)/xf4bpp \
           -I$(XF86SRC)/xf24_32bpp \
           -I$(XF86SRC)/vgahw -I$(XF86SRC)/ramdac \
           -I$(XF86SRC)/ddc -I$(XF86SRC)/i2c -I$(XF86SRC)/vbe \
           -I$(XF86SRC)/rac -I$(XF86SRC)/int10 \
           -I$(FONTINCSRC) -I$(SERVERSRC)/include -I$(XINCLUDESRC) \
           -I$(XTOP)/include/extensions \
		   -I$(SERVERSRC)/render \
		   -I$(XF86SRC)/shadowfb \
		   -I$(SERVERSRC)/hw/xfree86 \
           $(DRIINCLUDES)
#endif

DEFINES = $(DRIDEFINES)

#if MakeHasPosixVariableSubstitutions
SubdirLibraryRule($(OBJS))
#endif

ModuleObjectRule()

ObjectModuleTarget(sis,$(OBJS))

InstallObjectModule(sis,$(MODULEDIR),drivers)

#if !defined(XF86DriverSDK)
InstallModuleManPage(sis)
#endif

DependTarget()

InstallDriverSDKNonExecFile(Imakefile,$(DRIVERSDKDIR)/drivers/sis)
InstallDriverSDKNonExecFile(sis.h,$(DRIVERSDKDIR)/drivers/sis)
InstallDriverSDKNonExecFile(sis300_accel.c,$(DRIVERSDKDIR)/drivers/sis)
InstallDriverSDKNonExecFile(sis300_accel.h,$(DRIVERSDKDIR)/drivers/sis)
InstallDriverSDKNonExecFile(sis310_accel.c,$(DRIVERSDKDIR)/drivers/sis)
InstallDriverSDKNonExecFile(sis310_accel.h,$(DRIVERSDKDIR)/drivers/sis)
InstallDriverSDKNonExecFile(sis_accel.h,$(DRIVERSDKDIR)/drivers/sis)
InstallDriverSDKNonExecFile(sis_accel.c,$(DRIVERSDKDIR)/drivers/sis)
InstallDriverSDKNonExecFile(init.c,$(DRIVERSDKDIR)/drivers/sis)
InstallDriverSDKNonExecFile(init.h,$(DRIVERSDKDIR)/drivers/sis)
InstallDriverSDKNonExecFile(init301.c,$(DRIVERSDKDIR)/drivers/sis)
InstallDriverSDKNonExecFile(init301.h,$(DRIVERSDKDIR)/drivers/sis)
InstallDriverSDKNonExecFile(osdef.h,$(DRIVERSDKDIR)/drivers/sis)
InstallDriverSDKNonExecFile(initdef.h,$(DRIVERSDKDIR)/drivers/sis)
InstallDriverSDKNonExecFile(300vtbl.h,$(DRIVERSDKDIR)/drivers/sis)
InstallDriverSDKNonExecFile(310vtbl.h,$(DRIVERSDKDIR)/drivers/sis)
InstallDriverSDKNonExecFile(oem300.h,$(DRIVERSDKDIR)/drivers/sis)
InstallDriverSDKNonExecFile(oem310.h,$(DRIVERSDKDIR)/drivers/sis)
InstallDriverSDKNonExecFile(sis_cursor.c,$(DRIVERSDKDIR)/drivers/sis)
InstallDriverSDKNonExecFile(sis_cursor.h,$(DRIVERSDKDIR)/drivers/sis)
InstallDriverSDKNonExecFile(sis_dac.c,$(DRIVERSDKDIR)/drivers/sis)
InstallDriverSDKNonExecFile(sis_dac.h,$(DRIVERSDKDIR)/drivers/sis)
InstallDriverSDKNonExecFile(sis_dga.c,$(DRIVERSDKDIR)/drivers/sis)
InstallDriverSDKNonExecFile(sis_dri.c,$(DRIVERSDKDIR)/drivers/sis)
InstallDriverSDKNonExecFile(sis_dri.h,$(DRIVERSDKDIR)/drivers/sis)
InstallDriverSDKNonExecFile(sis_common.h,$(DRIVERSDKDIR)/drivers/sis)
InstallDriverSDKNonExecFile(sis_driver.c,$(DRIVERSDKDIR)/drivers/sis)
InstallDriverSDKNonExecFile(sis_driver.h,$(DRIVERSDKDIR)/drivers/sis)
InstallDriverSDKNonExecFile(sis_opt.c,$(DRIVERSDKDIR)/drivers/sis)
InstallDriverSDKNonExecFile(sis_regs.h,$(DRIVERSDKDIR)/drivers/sis)
InstallDriverSDKNonExecFile(sis_setup.c,$(DRIVERSDKDIR)/drivers/sis)
InstallDriverSDKNonExecFile(sis_shadow.c,$(DRIVERSDKDIR)/drivers/sis)
InstallDriverSDKNonExecFile(sis_shadow.h,$(DRIVERSDKDIR)/drivers/sis)
InstallDriverSDKNonExecFile(sis_vb.c,$(DRIVERSDKDIR)/drivers/sis)
InstallDriverSDKNonExecFile(sis_vb.h,$(DRIVERSDKDIR)/drivers/sis)
InstallDriverSDKNonExecFile(sis_vga.c,$(DRIVERSDKDIR)/drivers/sis)
InstallDriverSDKNonExecFile(sis_video.c,$(DRIVERSDKDIR)/drivers/sis)
InstallDriverSDKNonExecFile(sis6326_video.c,$(DRIVERSDKDIR)/drivers/sis)
InstallDriverSDKNonExecFile(sis_accel.c,$(DRIVERSDKDIR)/drivers/sis)
InstallDriverSDKNonExecFile(vgatypes.h,$(DRIVERSDKDIR)/drivers/sis)
InstallDriverSDKNonExecFile(vstruct.h,$(DRIVERSDKDIR)/drivers/sis)
InstallDriverSDKNonExecFile(sis_3daccel.h,$(DRIVERSDKDIR)/drivers/sis)
InstallDriverSDKNonExecFile(sis_3daccel.c,$(DRIVERSDKDIR)/drivers/sis)
InstallDriverSDKNonExecFile(sis_hwmc.c,$(DRIVERSDKDIR)/drivers/sis)
InstallDriverSDKNonExecFile(sis_videostr.h,$(DRIVERSDKDIR)/drivers/sis)
InstallDriverSDKNonExecFile(sis_video.h,$(DRIVERSDKDIR)/drivers/sis)
InstallDriverSDKNonExecFile(initextx.h.h,$(DRIVERSDKDIR)/drivers/sis)



InstallDriverSDKObjectModule(sis,$(DRIVERSDKMODULEDIR),drivers)
